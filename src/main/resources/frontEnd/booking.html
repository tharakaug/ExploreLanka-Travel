<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Your Trip | ExploreLanka</title>
    <link rel="stylesheet" href="css/booking.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/3.4.0/remixicon.css">
</head>
<body>

<header id="home">
    <nav>
        <div class="nav__bar">
            <div class="nav__logo"><a href="#">ExploreLanka </a></div>
            <ul class="nav__links">
                <li class="link"><a href="index.html">Home</a></li>
                <li class="link"><a href="#about">About Us</a></li>
                <li class="link"><a href="#discover">Discover</a></li>
                <li class="link"><a href="#gallery">Gallery</a></li>
                <li class="link"><a href="#contact">Contact</a></li>
                <li class="link search">
                    <span><i class="ri-search-line"></i></span>
                </li>
            </ul>
        </div>
    </nav>

    <div class="section__container header__container">
        <h1>The new way to plan your next adventure</h1>
        <h4>Explore the colourful world</h4>
        <button class="btn">
            Explore More <i class="ri-arrow-right-line"></i>
        </button>
    </div>
</header>

<h2 class="section__header">Plan Your Perfect Trip with ExploreLanka!</h2>
<!-- Booking Section -->


<!--<section class="weather-check">-->
<!--    <div class="container">-->
<!--        <h2 class="section-title">Check Weather Condition of Your Destination</h2>-->

<!--        <div class="weather-form">-->
<!--            <input type="text" id="city" placeholder="Enter Destination City" required />-->
<!--            <button id="check-weather-btn" class="btn">Check Weather</button>-->

<!--            <div id="weather-info" style="display:none;">-->
<!--                <h3>Weather Information:</h3>-->
<!--                <p><strong>Temperature:</strong> <span id="temperature"></span> ¬∞C</p>-->
<!--                <p><strong>Condition:</strong> <span id="weather-condition"></span></p>-->
<!--                <p><strong>Humidity:</strong> <span id="humidity"></span>%</p>-->
<!--                <p><strong>Wind Speed:</strong> <span id="wind-speed"></span> m/s</p>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Load your main weather functions &ndash;&gt;-->
<!--    <script src="js/weather.js"></script>-->

<!--    &lt;!&ndash; Attach the event listener after weather.js is loaded &ndash;&gt;-->
<!--    <script>-->
<!--        document.getElementById('check-weather-btn').addEventListener('click', async () => {-->
<!--            const city = document.getElementById('city').value;-->
<!--            if (city) {-->
<!--                const weather = await fetchWeather(city);-->
<!--                if (weather) {-->
<!--                    displayWeather(weather);-->
<!--                }-->
<!--            }-->
<!--        });-->
<!--    </script>-->
<!--</section>-->

<section class="weather-check">
    <div class="container">
        <h2 class="section-title">üå§Ô∏è Check Weather at Your Destination</h2>

        <div class="weather-form">
            <input type="text" id="destination-city" placeholder="Enter Destination City" required />
            <input type="date" id="travel-date" required />
            <button id="check-weather-btn" class="btn">Check Weather</button>
        </div>

        <div id="weather-info" style="display: none;" class="weather-card">
            <h3>Weather Information</h3>
            <div class="weather-details">
                <p><strong>Temperature:</strong> <span id="temperature"></span> ¬∞C</p>
                <p><strong>Condition:</strong> <span id="weather-condition"></span></p>
                <p><strong>Humidity:</strong> <span id="humidity"></span>%</p>
                <p><strong>Wind Speed:</strong> <span id="wind-speed"></span> m/s</p>
            </div>
        </div>
    </div>

    <script src="js/weather.js"></script>
    <script>
        document.getElementById('check-weather-btn').addEventListener('click', async () => {
            const city = document.getElementById('destination-city').value.trim();
            const date = document.getElementById('travel-date').value;

            if (city && date) {
                const weather = await fetchWeather(city, date);
                if (weather) {
                    displayWeather(weather);
                }
            } else {
                alert('Please enter both city and date!');
            }
        });
    </script>
</section>



<section class="booking">

    <div class="booking__container">
        <h2>Book Your Trip Now!</h2>
        <p>Book your dream trip with us and experience the best of Sri Lanka‚Äôs stunning landscapes, rich culture, and warm hospitality.</p>

        <div class="booking__form-container">
            <form action="#" method="POST" class="booking__form">

                <div class="form__row">
                    <div class="form__group">
                        <label for="name">Full Name:</label>
                        <input type="text" id="name" name="name" required placeholder="Enter your full name">
                    </div>

                    <div class="form__group">
                        <label for="email">Email Address:</label>
                        <input type="email" id="email" name="email" required placeholder="Enter your email">
                    </div>
                </div>

                <div class="form__row">
<!--                    <div class="form__group">-->
<!--                        <label for="phone">Phone Number:</label>-->
<!--                        <input type="tel" id="phone" name="phone" required placeholder="Enter your phone number">-->
<!--                    </div>-->

                    <div class="form__group">
                        <label for="package">Choose Your Package:</label>
                        <select id="package" name="package" required>
                            <option value="" disabled selected>Select a package</option>
                            <option value="budget">Budget Explorer Package</option>
                            <option value="classic">Classic Sri Lanka Package</option>
                            <option value="luxury">Luxury Paradise Package</option>
                        </select>
                    </div>
                </div>

                <div class="form__row">
                    <div class="form__group">
                        <label for="date">Select Travel Date:</label>
                        <input type="date" id="date" name="date" required>
                    </div>

                    <div class="form__group">
                        <label for="guests">Number of Guests:</label>
                        <input type="number" id="guests" name="guests" min="1" required>
                    </div>
                </div>

                <div class="form__group">
                    <label for="message">Additional Requests:</label>
                    <textarea id="message" name="message" rows="4" placeholder="Enter any special requests or preferences"></textarea>
                </div>

                <div class="form-footer">
                    <p class="price-info"> Secure your booking now for just...</p>
                    <button type="submit" id="confirm-booking" class="btn">Confirm Booking</button>
                </div>
            </form>
        </div>

        <div class="booking__info">
            <h3> Need Help?</h3>
            <p>Contact our travel experts for personalized recommendations.</p>
            <p> Hotline: +94 77 726 5746</p>
            <p> Email: <a href="mailto:info@explorelanka.com">info@explorelanka.com</a></p>
        </div>

        <!--        <p class="note">By submitting this form, you agree to our <a href="#">terms and conditions</a>.</p>-->
    </div>
</section>

<!-- Add jQuery from CDN -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<footer class="footer" id="Footer">
    <div class="footer__container">
        <div class="footer__info">
            <h4> ExploreLanka</h4>
            <p>46/26, Navam Mawatha,<br>Colombo 02, Sri Lanka.</p>
            <p> General: +94 11 234 5700<br> Hotline: +94 77 726 5746 (24/7)</p>
            <p> Email: <a href="mailto:support@explorelanka.com">support@explorelanka.com</a></p>
            <p> Opening Hours: Mon - Fri: 9 AM to 5 PM</p>
        </div>

        <div class="footer__nav">
            <h5>Quick Links</h5>
            <ul>
                <li class="link"><a href="#home">Home</a></li>
                <li class="link"><a href="#about">About Us</a></li>
                <li class="link"><a href="#discover">Packages</a></li>
                <li class="link"><a href="#journals">Journals</a></li>
                <li class="link"><a href="#gallery">Gallery</a></li>
                <li class="link"><a href="#Footer">Contact</a></li>
            </ul>
        </div>

        <div class="footer__family">
            <h5> ExploreLanka Family</h5>
            <ul>
                <li><a href="#"> ExploreLanka Hotels</a></li>
                <li><a href="#">Ô∏è Sri Lanka Tailor-Made</a></li>
                <li><a href="#"> ExploreLanka Journeys</a></li>
            </ul>
        </div>

        <div class="footer__newsletter">
            <h5> Subscribe to Our Newsletter</h5>
            <form action="#">
                <input type="email" placeholder="Enter your email here" required>
                <button type="submit">Subscribe</button>
            </form>
        </div>

        <!-- WhatsApp Floating Button -->
        <a href="https://wa.me/94760676802" target="_blank" class="whatsapp-btn" id="whatsapp-btn">
            <i class="ri-whatsapp-line"></i>
        </a>

        <div class="footer__socials">
            <h5> Follow Us</h5>
            <div class="social-icons">
                <a href="#"><i class="ri-facebook-fill"></i></a>
                <a href="#"><i class="ri-instagram-fill"></i></a>
                <a href="#"><i class="ri-twitter-fill"></i></a>
                <a href="#"><i class="ri-linkedin-fill"></i></a>
            </div>
        </div>
    </div>

    <div class="footer__bar">
        <p>¬© 2025 ExploreLanka, All Rights Reserved</p>
        <ul>
            <li><a href="#privacy-policy">Privacy Policy</a></li>
            <li><a href="#terms-conditions">Terms & Conditions</a></li>
        </ul>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
    document.querySelector('.booking__form').addEventListener('submit', function(e) {
        e.preventDefault(); // Prevent the normal form submit

        // Gather data from the form
        const bookingData = {
            userEmail: document.getElementById('email').value,
            packageName: getPackageName(document.getElementById('package').value),
            travelDate: document.getElementById('date').value,
            numberOfGuests: document.getElementById('guests').value,
            additionalRequests: document.getElementById('message').value,
        };

        // Send data to backend API using fetch
        fetch('http://localhost:8080/api/v1/booking/save', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',  // Ensure the correct content type is set
                // You can also add Authorization header if JWT is used
                // 'Authorization': 'Bearer your_jwt_token'
            },
            body: JSON.stringify(bookingData)  // Send the bookingData as JSON
        })
            .then(response => response.json())  // Parse JSON response from the backend
            .then(data => {
                if (data.code === "00") {  // Check if booking was successful
                    alert("Booking Successful üéâ");
                } else {
                    alert("Booking Failed: " + data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert("Something went wrong üò¢");
            });
    });

    // Helper function to map select value to package name
    function getPackageName(value) {
        if (value === "budget") return "Budget Explorer Package";
        if (value === "classic") return "Classic Sri Lanka Package";
        if (value === "luxury") return "Luxury Paradise Package";
        return value;  // If the value doesn't match, return it directly
    }

</script>



</body>
</html>